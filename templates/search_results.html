{% extends 'base.html' %}

{% block title %}Search Results{% endblock %}

{% block content %}
    <h2>Search Results for "{{ query }}"</h2>


    {% if accounts %}
    <h3>Accounts</h3>
        <ul class="list-group">
            {% for account in accounts %}
                <li class="list-group-item rounded-0">
                    <strong>Account Provider:</strong> {{ account.provider_name }}<br>
                    <strong>Account Name:</strong> {{ account.name }}<br>
                    <strong>Account ID:</strong> {{ account.account_id }}<br>
                    <strong>Regions:</strong>
                    <ul>
                        {% for region in account.regions %}
                            <li><a href="{{ url_for('region_detail', account_id=account.account_id, region_id=region.id) }}">{{ region.name }}</a></li>
                        {% endfor %}
                    </ul>
                </li>
            {% endfor %}
        </ul>
    {% endif %}


    {% if regions %}
    <h3>Regions</h3>
        <ul class="list-group rounded-0">
            {% for region in regions %}
                <li class="list-group-item rounded-0">
                    <strong>Region Name:</strong> {{ region.name }}<br>
                    <strong>Account ID:</strong> {{ region.account.account_id }}<br>
                    <strong>Services:</strong>
                    <ul>
                        {% for service in region.services %}
                            <li>{{ service.name }} - {{ service.type }}</li>
                        {% endfor %}
                    </ul>
                </li>
            {% endfor %}
        </ul>
    {% endif %}


    {% if services %}
    <h3>Services</h3>
        <ul class="list-group rounded-0">
            {% for service in services %}
                <li class="list-group-item rounded-0">
                    <strong>Service Name:</strong> {{ service.name }}<br>
                    <strong>Service Type:</strong> {{ service.type }}<br>
                    <strong>User:</strong> {{ service.user }}<br>
                </li>
            {% endfor %}
        </ul>
    {% endif %}


    {% if matched_services_by_type %}
    <h3>Matched Services by Type</h3>
        <ul class="list-group rounded-0">
            {% for service in matched_services_by_type %}
                <li class="list-group-item rounded-0">
                    <strong>Service Name:</strong> {{ service.name }}<br>
                    <strong>Service Type:</strong> {{ service.type }}<br>
                    <strong>User:</strong> {{ service.region.name }}<br>
                    <strong>User:</strong> {{ service.region.account.name }}<br>
                </li>
            {% endfor %}
        </ul>

    {% endif %}

    <a href="{{ url_for('index') }}" class="btn btn-primary mt-3 rounded-0">Back to Home</a>
{% endblock %}
