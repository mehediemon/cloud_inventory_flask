{% extends 'base.html' %}

{% block title %}Edit Account{% endblock %}
{% block headnav %}

<div class="navbar shadow rounded-0 p-3 " style="background-color: #294867; border: none;">

    <div>
        <h4>Edit Accounts</h4>
    </div>
    
    <div class=" d-flex rounded-0 justify-content-end">
        <a href="{{ url_for('index') }}" class="btn btn-primary rounded-0">Back To Home</a>
    </div>
</div>



{% endblock %}

{% block content %}

    <form id="accountForm" action="{{ url_for('edit_account', account_id=account.id) }}" method="POST" class="shadow p-4 rounded bg-light">
        
        <!-- Toggle Switch -->
        <div class="mb-3 form-check form-switch">
            <input class="form-check-input" type="checkbox" id="editToggle" onchange="toggleEditMode()">
            <label class="form-check-label" for="editToggle">Edit Mode</label>
        </div>

        <div class="mb-3">
            <label for="name" class="form-label">Account Name</label>
            <input type="text" class="form-control rounded-0" name="name" value="{{ account.name }}" required disabled>
        </div>
        <div class="mb-3">
            <label for="account_id" class="form-label">Account ID</label>
            <input type="number" class="form-control rounded-0" name="account_id" value="{{ account.account_id }}" required disabled>
        </div>
        <div class="mb-3">
            <label for="provider_name" class="form-label">Provider Name</label>
            <select class="form-control rounded-0" name="provider_name" required disabled>
                <option value="" disabled>Select Provider</option>
                {% for provider in providers %}
                <option value="{{ provider }}" {% if provider == account.provider_name %}selected{% endif %}>{{ provider }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control rounded-0" name="email" value="{{ account.email }}" required disabled>
        </div>
        <div class="mb-3">
            <label for="passwd" class="form-label">Password</label>
            <input type="password" class="form-control rounded-0" name="passwd" value="{{ account.passwd }}" required disabled>
        </div>
        
        <button type="submit" class="btn btn-primary rounded-0 w-100" disabled>Update Account</button>
    </form>


<style>
    body {
        background-color: #f8f9fa; /* Light background color */
    }
    .form-control:focus {
        border-color: #007bff; /* Custom focus color */
        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25); /* Focus shadow */
    }
</style>

<script>
    function toggleEditMode() {
        const form = document.getElementById('accountForm');
        const button = form.querySelector('button[type="submit"]');
        const isEditMode = document.getElementById('editToggle').checked;

        // Only toggle specific fields
        const editableFields = form.querySelectorAll('input[name="name"], input[name="email"], input[name="passwd"]');

        editableFields.forEach(input => {
            input.disabled = !isEditMode;
        });

        button.disabled = !isEditMode; // Enable the submit button in edit mode
    }
</script>
{% endblock %}
